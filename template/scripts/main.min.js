function smf_codeBoxFix(){for(var e=document.getElementsByTagName("code"),t=e.length-1;t>=0;t--)is_webkit&&e[t].offsetHeight<20?e[t].style.height=e[t].offsetHeight+20+"px":is_ff&&(e[t].scrollWidth>e[t].clientWidth||0==e[t].clientWidth)?e[t].style.overflow="scroll":"currentStyle"in e[t]&&"auto"==e[t].currentStyle.overflow&&(""==e[t].currentStyle.height||"auto"==e[t].currentStyle.height)&&(e[t].scrollWidth>e[t].clientWidth||0==e[t].clientWidth)&&0!=e[t].offsetHeight&&(e[t].style.height=e[t].offsetHeight+24+"px")}function smc_toggleImageDimensions(){var e=document.getElementsByTagName("IMG");for(oImage in e)void 0!=e[oImage].className&&e[oImage].className.indexOf("bbc_img resized")!=-1&&(e[oImage].style.cursor="pointer",e[oImage].onclick=function(){this.style.width=this.style.height="auto"==this.style.width?null:"auto"})}function smf_addButton(e,t,o){var s=document.getElementById(e),n=s.getElementsByTagName("span");if(n.length>0){var i=n[n.length-1];i.className=i.className.replace(/\s*last/,"position_holder")}var a=s.getElementsByTagName("ul")[0],l=document.createElement("li");setInnerHTML(l,'<a href="'+o.sUrl+'" '+("sCustom"in o?o.sCustom:"")+'><span class="last"'+("sId"in o?' id="'+o.sId+'"':"")+">"+o.sText+"</span></a>"),a.appendChild(l)}jQuery(document).ready(function(e){function t(){e("#quick_edit_body_container .button--accept").click(function(){e(".modified-pre-text").addClass("is-hidden"),e(".modified").removeClass("is-hidden")})}var o,s;e(".modifybutton").click(function(){setTimeout(function(){t()},300)}),e("[data-openChild]").click(function(t){t.preventDefault();var o=e(this).data("openchild");e(this).find(".icon-up-open").toggleClass("open"),e("[data-childOf="+o+"]").slideToggle()}),e(".js-recent-time").each(function(t,o){var s={hour:"2-digit",minute:"2-digit",second:"2-digit",month:"short",day:"numeric"};date=new Date(1e3*e(o).data("timestamp")).toLocaleDateString("en-GB",s),e(o).html(date)}),e(".js-offcanvas__toggle").click(function(){o=!0,e(".offcanvas").toggleClass("offcanvas--right"),e("html").toggleClass("is-offcanvas"),e("body").toggleClass("noscroll"),e(".js-overlay").fadeToggle()}),e(".js-overlay").click(function(){s&&(e(".js-login").fadeToggle(),e(".js-overlay").fadeToggle(),e("body").toggleClass("noscroll")),o&&(e(".offcanvas").toggleClass("offcanvas--right"),e("html").toggleClass("is-offcanvas"),e("body").toggleClass("noscroll"),e(".js-overlay").fadeToggle(),o=!1)}),e(".js-login__toggle").click(function(){s=!0,e(".js-login").fadeToggle(),e(".js-overlay").fadeToggle(),e("body").toggleClass("noscroll")}),e(".offcanvas .has-children a").click(function(t){e(this).hasClass("icon-up-open")&&t.preventDefault(),e(this).next("ul").slideToggle(299),e(this).hasClass("open")?(element=e(this),setTimeout(function(t){e(element).toggleClass("open")},300)):e(this).toggleClass("open")}),e(".js-register").click(function(){location.href="/?action=register"});new Blazy({selector:".article_inner img",offset:300,success:function(t){e(t).addClass("fpsc"),e(t).removeClass("loading")}})}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.Blazy=t()}(this,function(){"use strict";function e(e){var o=e._util;o.elements=d(e.options.selector),o.count=o.elements.length,o.destroyed&&(o.destroyed=!1,e.options.container&&m(e.options.container,function(e){u(e,"scroll",o.validateT)}),u(window,"resize",o.saveViewportOffsetT),u(window,"resize",o.validateT),u(window,"scroll",o.validateT)),t(e)}function t(e){for(var t=e._util,s=0;s<t.count;s++){var n=t.elements[s];(o(n)||r(n,e.options.successClass))&&(e.load(n),t.elements.splice(s,1),t.count--,s--)}0===t.count&&e.destroy()}function o(e){var t=e.getBoundingClientRect();return t.right>=p.left&&t.bottom>=p.top&&t.left<=p.right&&t.top<=p.bottom}function s(e,t,o){if(!r(e,o.successClass)&&(t||o.loadInvisible||e.offsetWidth>0&&e.offsetHeight>0)){var s=e.getAttribute(v)||e.getAttribute(o.src);if(s){var d=s.split(o.separator),f=d[y&&d.length>1?1:0],h=l(e,"img");if(h||void 0===e.src){var p=new Image,b=function(){o.error&&o.error(e,"invalid"),c(e,o.errorClass),g(p,"error",b),g(p,"load",T)},T=function(){if(h){i(e,f),a(e,C,o.srcset);var t=e.parentNode;t&&l(t,"picture")&&m(t.getElementsByTagName("source"),function(e){a(e,C,o.srcset)})}else e.style.backgroundImage='url("'+f+'")';n(e,o),g(p,"load",T),g(p,"error",b)};u(p,"error",b),u(p,"load",T),i(p,f)}else i(e,f),n(e,o)}else l(e,"video")?(m(e.getElementsByTagName("source"),function(e){a(e,w,o.src)}),e.load(),n(e,o)):(o.error&&o.error(e,"missing"),c(e,o.errorClass))}}function n(e,t){c(e,t.successClass),t.success&&t.success(e),e.removeAttribute(t.src),m(t.breakpoints,function(t){e.removeAttribute(t.src)})}function i(e,t){e[w]=t}function a(e,t,o){var s=e.getAttribute(o);s&&(e[t]=s,e.removeAttribute(o))}function l(e,t){return e.nodeName.toLowerCase()===t}function r(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function c(e,t){r(e,t)||(e.className+=" "+t)}function d(e){for(var t=[],o=document.querySelectorAll(e),s=o.length;s--;t.unshift(o[s]));return t}function f(e){p.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,p.right=(window.innerWidth||document.documentElement.clientWidth)+e}function u(e,t,o){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,o):e.addEventListener(t,o,!1)}function g(e,t,o){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,o):e.removeEventListener(t,o,!1)}function m(e,t){if(e&&t)for(var o=e.length,s=0;s<o&&t(e[s],s)!==!1;s++);}function h(e,t,o){var s=0;return function(){var n=+new Date;n-s<t||(s=n,e.apply(o,arguments))}}var v,p,y,w="src",C="srcset";return function(o){if(!document.querySelectorAll){var n=document.createStyleSheet();document.querySelectorAll=function(e,t,o,s,i){for(i=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),o=e.length;o--;){for(n.addRule(e[o],"k:v"),s=i.length;s--;)i[s].currentStyle.k&&t.push(i[s]);n.removeRule(0)}return t}}var i=this,a=i._util={};a.elements=[],a.destroyed=!0,i.options=o||{},i.options.error=i.options.error||!1,i.options.offset=i.options.offset||100,i.options.success=i.options.success||!1,i.options.selector=i.options.selector||".b-lazy",i.options.separator=i.options.separator||"|",i.options.container=!!i.options.container&&document.querySelectorAll(i.options.container),i.options.errorClass=i.options.errorClass||"b-error",i.options.breakpoints=i.options.breakpoints||!1,i.options.loadInvisible=i.options.loadInvisible||!1,i.options.successClass=i.options.successClass||"b-loaded",i.options.validateDelay=i.options.validateDelay||25,i.options.saveViewportOffsetDelay=i.options.saveViewportOffsetDelay||50,i.options.srcset=i.options.srcset||"data-srcset",i.options.src=v=i.options.src||"data-src",y=window.devicePixelRatio>1,p={},p.top=0-i.options.offset,p.left=0-i.options.offset,i.revalidate=function(){e(this)},i.load=function(e,t){var o=this.options;void 0===e.length?s(e,t,o):m(e,function(e){s(e,t,o)})},i.destroy=function(){var e=this,t=e._util;e.options.container&&m(e.options.container,function(e){g(e,"scroll",t.validateT)}),g(window,"scroll",t.validateT),g(window,"resize",t.validateT),g(window,"resize",t.saveViewportOffsetT),t.count=0,t.elements.length=0,t.destroyed=!0},a.validateT=h(function(){t(i)},i.options.validateDelay,i),a.saveViewportOffsetT=h(function(){f(i.options.offset)},i.options.saveViewportOffsetDelay,i),f(i.options.offset),m(i.options.breakpoints,function(e){if(e.width>=window.screen.width)return v=e.src,!1}),setTimeout(function(){e(i)})}}),(is_ie&&!is_ie4||is_webkit||is_ff)&&addLoadEvent(smf_codeBoxFix),addLoadEvent(smc_toggleImageDimensions);var smf_addListItemHoverEvents=function(){for(var e=0;e<document.styleSheets.length;e++)for(var t=0;t<document.styleSheets[e].rules.length;t++)oCssRule=document.styleSheets[e].rules[t],oCssRule.selectorText.indexOf("LI:hover")!=-1&&(sNewSelector=oCssRule.selectorText.replace(/LI:hover/gi,"LI.iehover"),document.styleSheets[e].addRule(sNewSelector,oCssRule.style.cssText));var o=document.getElementsByTagName("LI");for(oListItem in o)o[oListItem].onmouseover=function(){this.className+=" iehover"},o[oListItem].onmouseout=function(){this.className=this.className.replace(new RegExp(" iehover\\b"),"")}};is_ie7down&&"attachEvent"in window&&window.attachEvent("onload",smf_addListItemHoverEvents);